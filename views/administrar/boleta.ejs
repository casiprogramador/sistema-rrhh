<% layout('/layouts/admin') -%>


<!-- partial -->
<div class="content-wrapper">
       <h1 class="page-title text-center">Administración de Boletas</h1>
       <div class="row grid-margin">

          <div class="col-lg-12 grid-margin grid-margin-lg-0">
              <%if (error_msg.length > 0 ) { %>
                  <div class="alert alert-warning text-center" role="alert">
                    <%= error_msg %>
                  </div>
                <% } %>
          </div>
        </div>
         <div class="col-12 col-lg-12 grid-margin grid-margin-lg-0">
           <div class="card">
             <div class="card-body">
               <form  method="post" action="/administrar/boleta/buscar">
                   <div class="form-group row">
                      <label for="area" class="col-sm-3 col-form-label">Estado de la licencia:</label>
                        <div class="col-sm-8">
                                <select class="form-control" name="estado" id="estado" >
                                    <option value="Todos">Todos</option>
                                    <option value="Anulado">Anulado</option>
                                    <option value="Pendiente">Pendiente</option>
                                    <option value="Aprobado">Aprobado</option>
                                </select>
                              </div>
                        </div>
                        
                        <div class="form-group row" style="display: none"> 
                            <label for="fecha reporte" class="col-sm-3 col-form-label">Periodo:</label>
                            <label for="fecha reporte" class="col-sm-1 col-form-label">Del:</label>
                            <div class="col-sm-3">
                                
                              <div class="input-group date datepicker" id="datetimepicker1">
                                  <input type="text" class="form-control" name="fecha_inicio" id="fecha_inicio" >
                                  <div class="input-group-addon"> 
                                  <span class="mdi mdi-calendar-blank"></span>
                                  </div>
                              </div>
                              </div>
                              <label for="fecha reporte" class="col-sm-1 col-form-label">al:</label>
                            <div class="col-sm-3">
                                  <div class="input-group date datepicker" id="datetimepicker2">
                                      <input type="text" class="form-control" name="fecha_fin" id="fecha_fin" >
                                      <div class="input-group-addon">  
                                      <span class="mdi mdi-calendar-blank"></span>
                                      </div>
                                  </div>
                            </div>                      
                        </div>
                        <div class="col-md-12 text-center"> 
                          <button type="submit" class="btn btn-primary">Recuperar Boletas</button>
                        </div>
                      </form>
                        
                      
                      <div class="form-group row" id="panel-boletas">
                          <div class="col-12">
                                    <table id="table-administracion-boletas" class="table table-striped table-bordered" cellspacing="0" width="100%">
                                      <thead>
                                        <tr>
                                            <th>C.I.</th>
                                            <th>Nombre del empleado</th>
                                            <th>Tipo de Boleta</th>
                                            <th>Fecha de solicitud</th>
                                            <th>Desde</th>
                                            <th>Hasta</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                          <% for(var i=0; i< boletas.length; i++) { %>
                                        <tr>
                                            <td><%= boletas[i].empleado.ndi %></td>
                                            <td><%= boletas[i].empleado.nombres%> <%= boletas[i].empleado.paterno%> <%= boletas[i].empleado.materno%></td>
                                            <td><%= boletas[i].tipoboleta.tipo_boleta %></td>
                                            <td data-order="<%= moment(boletas[i].fecha_solicitud).format( 'YYYY-MM-DD') %>"><%= moment(boletas[i].fecha_solicitud).format( 'DD/MM/YYYY') %> </td>
                                            <td data-order="<%= moment(boletas[i].fecha_solicitud).format( 'YYYY-MM-DD') %>"><%= moment(boletas[i].fecha_inicio).format( 'DD/MM/YYYY, h:mm a') %> </td>
                                            <td data-order="<%= moment(boletas[i].fecha_solicitud).format( 'YYYY-MM-DD') %>"><%= moment(boletas[i].fecha_fin).format( 'DD/MM/YYYY, h:mm a') %> </td>
                                            <td>
                                                <% if(boletas[i].estado == 'Pendiente') { %>
                                                  <span class="badge badge-warning"><%= boletas[i].estado %></span>
                                                <% } %>
                                                <% if(boletas[i].estado == 'Aprobado') { %>
                                                  <span class="badge badge-success"><%= boletas[i].estado %></span>
                                                <% } %>
                                                <% if(boletas[i].estado == 'Anulado') { %>
                                                  <span class="badge badge-danger"><%= boletas[i].estado %></span>
                                                <% } %>
                                              
                                            </td>
                                            <td class="text-center">
                                                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#opcionesModal"><i class="mdi mdi-pencil"></i>Opciones</button>
                                              </td>
                                            
                                        </tr>
                                        <% } %>
                                      </tbody>
                                    </table>
                                  </div>
                  </div>

             </div>
           </div>
         </div>

</div>
    <!--default modal-->
    <div class="modal fade" id="opcionesModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
          <div class="modal-content">
                  <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                          </button>
                      </div>
                      <div class="modal-body">
                          <h2>Datos Empleado</h2>
                          <form class="forms-sample" id="form-prescripcion" method="post" action="/vacacion/prescripcion">
                                  <div class="form-group row">
                                      <label for="exampleInputEmail1" class="col-sm-3 col-form-label">Nombre:</label>
                                      <div class="col-sm-8">
                                        <input class="form-control p-input" value="MARCELO PABLO CHOQUE" disabled id="modal-empleado-nombre">
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                          <label for="exampleInputEmail1" class="col-sm-3 col-form-label">Boleta:</label>
                                          <div class="col-sm-8">
                                            <input class="form-control p-input" value="BOLETA EJEMPLO" disabled id="modal-empleado-area">
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                              <label for="exampleInputEmail1" class="col-sm-3 col-form-label">Fechas:</label>
                                              <div class="col-sm-8">
                                                <input class="form-control p-input" value="10/10/2017 AL 11/20/2018" disabled id="modal-empleado-cargo">
                                              </div>
                                          </div>
                                          <div class="form-group row">
                                            <label for="exampleInputEmail1" class="col-sm-3 col-form-label">Dias:</label>
                                            <div class="col-sm-8">
                                              <input class="form-control p-input" value="5.5 dias" disabled id="modal-empleado-cargo">
                                            </div>
                                        </div>
                                          <div class="form-group">
                                                  <h2 class="card-title text-center">¿Que gestion desea hacer la PRESCRIPCION?</h2>
                                                  <div class="row justify-content-md-center">
                                                  <div class="col col-lg-6" id="modal-check-vacacion">
                                                     
                                                  </div>
                                              </div>
                              </form>
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-outline-light" data-dismiss="modal">Cancelar</button>
                          <button type="button" class="btn btn-primary" id="button-prescripcion">Prescribir</button>
                      </div>
          </div>
      </div>
  </div>